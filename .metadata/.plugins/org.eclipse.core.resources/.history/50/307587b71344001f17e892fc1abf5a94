package com.jdbc.www.dao;

import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;

import com.jdbc.www.dto.MemberDTO;

public class MemberDAO {

	public void MemberDAO(Connection connection) {

	}

	public void register() {

	}

	public  MemberDTO login(Connection connection) {
		// connection -> main에서 넘어온 jdbc 1,2단계

		MemberDTO loginDTO = new MemberDTO();
		
		
		try {
			String sql = "select mno, mid, mpw, mdate from member where min=? and mpw?";
			PreparedStatement preparedStatement = connection.prepareStatement(sql);
			preparedStatement.setString(1,loginDTO.getMid()); //서비스에서 받은 id가 ?에 들어감.
			preparedStatement.setString(2,loginDTO.getMpw()); //서비스에서 받은 pw가 다음 ? 에 들어감.

			ResultSet resultSet = preparedStatement.executeQuery(); //위에서 만든 쿼리문 실행하고 결과를 resultSet 표로 받는다.

			while (resultSet.next()) {
				loginDTO.setMno(resultSet.getInt("mno"));
				loginDTO.setMid(resultSet.getString("mid"));
				loginDTO.setMpw(resultSet.getString("mpw"));
				loginDTO.setMdate(resultSet.getDate("mdate"));
				// resultSet 표에 있는 정보를 MemberDTO 객체에 넣는다.

			}

			resultSet.close();
			preparedStatement.close();

		} catch (SQLException e) {
			System.out.println(" 계정이 없는데요 ?");
			System.out.println(" 관리자야 sql 확인좀 해봐라");
			System.out.println(" 회원님 맞을래요 ?");
			e.printStackTrace();
		}
		return loginDTO;

	}

	public void update() {

	}

	public void delete() {

	}

}
